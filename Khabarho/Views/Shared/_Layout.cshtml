@using Khabarho.Models.PostModels
@using Khabarho.ViewModels

@{
    var categories = ViewBag.Categories as List<CategoryViewModel>;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport"
              content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <title>@ViewData["Title"] - Khabarho</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.css"/>
    <link rel="stylesheet" href="~/css/site.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/>
</head>
<body>
<header>
    <div class="container_post">
        <div class="logo">
            <h3>Хабар</h3>
        </div>
    </div>
<nav class="nav_bar">
    <div class="container_post">
        <div class="nav_bar_wrap">
            <ul class="nav_container">
                <li class="nav_item">
                    <a href="">Все потоки</a>
                </li>
                @{
                    System.Diagnostics.Debug.Assert(categories != null, nameof(categories) + " != null");
                }
                @foreach (var category in categories)
                {
                    <li class="nav_item">
                        <a href="">@category.Title</a>
                    </li>
                }
            </ul>
            <div class="nav_bar_icon_block">
                <a href="@Url.Action("GetAllByUserId", "Post")">
                    <img src="/images/post.svg" alt="post">
                </a>
                <a href="@Url.Action("Create", "Post")">
                    <img src="/images/pen.svg" alt="pen">
                </a>
            </div>
            <div class="badge-dark rounded float-right">
                @if(User.Identity.IsAuthenticated)
                {
                    <div class="d-inline-flex text-white ml-2">
                        <p class="text-center mt-2">@User.Identity.Name</p>
                        <form method="post" asp-controller="Account" asp-action="Logout">
                            <input class="btn text-white" type="submit" value="Выход" />
                        </form>
                        @if (User.IsInRole("Admin"))
                        {
                            <form method="get" asp-controller="Type" asp-action="GetAll">
                                <input class="btn text-white" type="submit" value="Админ" />
                            </form>    
                        }
                    </div>
                }
                else
                {
                    <ul class="nav_container">
                        <li class="nav_item mt-2 mb-2 ml-2">
                            <a class="text-white" asp-controller="Account" asp-action="Login">Вход</a>
                        </li>
                        <li class="nav_item mt-2 mb-2 text-white ">
                            <a class="text-white" asp-controller="Account" asp-action="Register">Регистрация</a>
                        </li>
                    </ul>
                }
            </div>
        </div>

    </div>
</nav>
</header>
<div class="container p-0">
    <br>
    <br>
    <main role="main" class="pb-3">
        @RenderBody()
    </main>
</div>

<footer class="border-top footer text-muted">
    <div class="container">
        &copy; 2021 - Khabarho - <a asp-area="" asp-controller="Home" asp-action="Privacy">Privacy</a>
    </div>
</footer>
<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
<script src="~/js/site.js" asp-append-version="true"></script>
@await RenderSectionAsync("Scripts", required: false)
</body>
</html>